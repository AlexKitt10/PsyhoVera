<!DOCTYPE html>
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">   <meta name="viewport" content="width=device-width, initial-scale=1.0"> <!--metatextblock--> <title>Application Form</title> <meta name="description" content="Collect information before sending a list of suggestions to the client."> <meta property="og:url" content="http://verapsyho.tilda.ws/page2"> <meta property="og:title" content="Application Form"> <meta property="og:description" content="Collect information before sending a list of suggestions to the client."> <meta property="og:type" content="website"> <meta property="og:image" content="https://thb.tildacdn.com/tild3433-3830-4265-b631-353266663633/-/resize/504x/babf38d1bedbd671927e.jpg"> <link rel="canonical" href="http://verapsyho.tilda.ws/page2"> <!--/metatextblock--> <meta name="format-detection" content="telephone=no"> <meta http-equiv="x-dns-prefetch-control" content="on"> <link rel="dns-prefetch" href="https://ws.tildacdn.com/"> <link rel="dns-prefetch" href="https://static.tildacdn.com/"> <link rel="shortcut icon" href="https://static.tildacdn.com/img/tildafavicon.ico" type="image/x-icon"> <!-- Assets --> <script src="./Application Form_files/tilda-fallback-1.0.min.js.загрузка" async="" charset="utf-8"></script> <link rel="stylesheet" href="./Application Form_files/tilda-grid-3.0.min.css" type="text/css" media="all" onerror="this.loaderr=&#39;y&#39;;"> <link rel="stylesheet" href="./Application Form_files/tilda-blocks-page87018016.min.css" type="text/css" media="all" onerror="this.loaderr=&#39;y&#39;;"> <link rel="stylesheet" href="./Application Form_files/tilda-cover-1.0.min.css" type="text/css" media="all" onerror="this.loaderr=&#39;y&#39;;"> <link rel="stylesheet" href="./Application Form_files/tilda-forms-1.0.min.css" type="text/css" media="all" onerror="this.loaderr=&#39;y&#39;;"> <link rel="stylesheet" href="./Application Form_files/fonts-tildasans.css" type="text/css" media="all" onerror="this.loaderr=&#39;y&#39;;"> <script nomodule="" src="./Application Form_files/tilda-polyfill-1.0.min.js.загрузка" charset="utf-8"></script> <script type="text/javascript">function t_onReady(func) {if(document.readyState!='loading') {func();} else {document.addEventListener('DOMContentLoaded',func);}}
t_onFuncLofunction ad(funcName,okFunc,time) {if(typeof window[funcName]==='function') {okFunc();} else {setTimeout(function() {t_onFuncLoad(funcName,okFunc,time);},(time||100));}}</script> <script src="./Application Form_files/tilda-scripts-3.0.min.js.загрузка" charset="utf-8" defer="" onerror="this.loaderr=&#39;y&#39;;"></script> <script src="./Application Form_files/tilda-blocks-page87018016.min.js.загрузка" charset="utf-8" async="" onerror="this.loaderr=&#39;y&#39;;"></script> <script src="./Application Form_files/tilda-lazyload-1.0.min.js.загрузка" charset="utf-8" async="" onerror="this.loaderr=&#39;y&#39;;"></script> <script src="./Application Form_files/tilda-cover-1.0.min.js.загрузка" charset="utf-8" async="" onerror="this.loaderr=&#39;y&#39;;"></script> <script src="./Application Form_files/tilda-forms-1.0.min.js.загрузка" charset="utf-8" async="" onerror="this.loaderr=&#39;y&#39;;"></script> <script src="./Application Form_files/tilda-events-1.0.min.js.загрузка" charset="utf-8" async="" onerror="this.loaderr=&#39;y&#39;;"></script> <script type="text/javascript">window.dataLayer=window.dataLayer||[];</script> <script type="text/javascript">(function() {if((/bot|google|yandex|baidu|bing|msn|duckduckbot|teoma|slurp|crawler|spider|robot|crawling|facebook/i.test(navigator.userAgent))===false&&typeof(sessionStorage)!='undefined'&&sessionStorage.getItem('visited')!=='y'&&document.visibilityState){var style=document.createElement('style');style.type='text/css';style.innerHTML='@media screen and (min-width: 980px) {.t-records {opacity: 0;}.t-records_animated {-webkit-transition: opacity ease-in-out .2s;-moz-transition: opacity ease-in-out .2s;-o-transition: opacity ease-in-out .2s;transition: opacity ease-in-out .2s;}.t-records.t-records_visible {opacity: 1;}}';document.getElementsByTagName('head')[0].appendChild(style);function t_setvisRecs(){var alr=document.querySelectorAll('.t-records');Array.prototype.forEach.call(alr,function(el) {el.classList.add("t-records_animated");});setTimeout(function() {Array.prototype.forEach.call(alr,function(el) {el.classList.add("t-records_visible");});sessionStorage.setItem("visited","y");},400);}
document.addEventListener('DOMContentLoaded',t_setvisRecs);}})();</script><style type="text/css">@media screen and (min-width: 980px) {.t-records {opacity: 0;}.t-records_animated {-webkit-transition: opacity ease-in-out .2s;-moz-transition: opacity ease-in-out .2s;-o-transition: opacity ease-in-out .2s;transition: opacity ease-in-out .2s;}.t-records.t-records_visible {opacity: 1;}}</style></head> <body class="t-body" style="margin:0;"> <!--allrecords--> <div id="allrecords" class="t-records t-records_animated t-records_visible" data-hook="blocks-collection-content-node" data-tilda-project-id="16430526" data-tilda-page-id="87018016" data-tilda-page-alias="page2" data-tilda-formskey="9307174047464ad444bdde1716430526" data-tilda-cookie="no" data-tilda-lazy="yes" data-tilda-root-zone="com" data-tilda-project-country="RU"> <div id="rec1441270821" class="r t-rec" style=" " data-animationappear="off" data-record-type="18"> <!-- cover --> <div class="t-cover" id="recorddiv1441270821" bgimgfield="img" style="background-image: url(&quot;https://thb.tildacdn.com/tild3433-3830-4265-b631-353266663633/-/resize/20x/babf38d1bedbd671927e.jpg&quot;); height: 500px;"> <div class="t-cover__carrier loaded" id="coverCarry1441270821" data-content-cover-id="1441270821" data-content-cover-bg="https://static.tildacdn.com/tild3433-3830-4265-b631-353266663633/babf38d1bedbd671927e.jpg" data-display-changed="true" data-content-cover-height="500px" data-content-cover-parallax="" data-content-use-image-for-mobile-cover="" style="height: 500px; background-attachment: scroll; background-image: url(&quot;https://optim.tildacdn.com/tild3433-3830-4265-b631-353266663633/-/format/webp/babf38d1bedbd671927e.jpg.webp&quot;);" itemscope="" itemtype="http://schema.org/ImageObject" data-content-cover-updated-height="500px"><meta itemprop="image" content="https://static.tildacdn.com/tild3433-3830-4265-b631-353266663633/babf38d1bedbd671927e.jpg"></div> <div class="t-cover__filter" style="height:500px;background-image: linear-gradient(to bottom, rgba(125,121,62,0.30), rgba(125,121,62,0.50));"></div> <div class="t-container"> <div class="t-col t-col_12 "> <div class="t-cover__wrapper t-valign_middle" style="height:500px;"> <div class="t001 t-align_center"> <div class="t001__wrapper" data-hook-content="covercontent"> <div class="t001__title t-title t-title_xl" field="title">Давай поговорим?)</div> <div class="t001__descr t-descr t-descr_xl t001__descr_center" field="descr">Сессия с психологом - это про заботу о себе</div> <span class="space"></span> </div> </div> </div> </div> </div> </div> <style> #rec1441270821 .t001__uptitle{text-transform:uppercase;}</style> </div> <div id="rec1441270831" class="r t-rec t-rec_pt_105 t-rec_pb_105" style="padding-top:105px;padding-bottom:105px; " data-animationappear="off" data-record-type="678"> <!-- t678 --> <div class="t678 t-input_nomargin"> <div class="t-container"> <div class="t-col t-col_8 t-prefix_2"> <div> <form id="form1441270831" name="form1441270831" role="form" action="file:///C:/Users/KUZYA/Desktop/%D0%90%D0%9B%D0%98%D0%A1%D0%9A%D0%90/2.html" method="POST" data-formactiontype="0" data-inputbox=".t-input-group" class="t-form js-form-proccess t-form_inputs-total_2 t-form_bbonly" data-success-callback="t678_onSuccess" data-success-popup="y"> <!-- NO ONE SERVICES CONNECTED --> <!-- @classes t-title t-text t-btn --> <div class="js-successbox t-form__successbox t-text t-text_md t-form-success-popup" aria-live="polite" style="display:none;"></div> <div class="t-form__inputsbox
t-form__inputsbox_vertical-form t-form__inputsbox_inrow "> <div class=" t-input-group t-input-group_nm " data-input-lid="1500477820459" data-field-type="nm" data-field-name="Name"> <label for="input_1500477820459" class="t-input-title t-descr t-descr_md" id="field-title_1500477820459" data-redactor-toolbar="no" field="li_title__1500477820459" style="color:;">Твоё имя и фамилия</label> <div class="t-input-block "> <input type="text" autocomplete="name" name="Name" id="input_1500477820459" class="t-input js-tilda-rule t-input_bbonly" value="" placeholder="Paul Smith" data-tilda-rule="name" aria-describedby="error_1500477820459" style="color:#000000;border:1px solid #000000;"> </div> <div class="t-input-error" aria-live="polite" id="error_1500477820459"></div> </div> <div class=" t-input-group t-input-group_in " data-input-lid="1500637595158" data-field-type="in" data-field-name="Опиши подробно своё состояние. Расскажи обо всём, что ты чувствуешь. Так же напиши о событиях, которые происходили в последнее время. Чем подробнее ты опишешь ситуацию, тем точнее я смогу дать ответ))"> <label for="input_1500637595158" class="t-input-title t-descr t-descr_md" id="field-title_1500637595158" data-redactor-toolbar="no" field="li_title__1500637595158" style="color:;">Опиши подробно своё состояние. Расскажи обо всём, что ты чувствуешь. Также напиши о событиях, которые происходили в последнее время. Чем подробнее ты опишешь ситуацию, тем точнее я смогу дать ответ))</label> <div class="t-input-block ">
</div> <div class="t-input-error" aria-live="polite" id="error_1500637595158"></div> </div> <div class="t-form__errorbox-middle"> <!--noindex--> <div class="js-errorbox-all t-form__errorbox-wrapper" style="display:none;" data-nosnippet="" tabindex="-1" aria-label="Ошибки при заполнении формы"> <ul role="list" class="t-form__errorbox-text t-text t-text_md"> <li class="t-form__errorbox-item js-rule-error js-rule-error-all"></li> <li class="t-form__errorbox-item js-rule-error js-rule-error-req"></li> <li class="t-form__errorbox-item js-rule-error js-rule-error-email"></li> <li class="t-form__errorbox-item js-rule-error js-rule-error-name"></li> <li class="t-form__errorbox-item js-rule-error js-rule-error-phone"></li> <li class="t-form__errorbox-item js-rule-error js-rule-error-minlength"></li> <li class="t-form__errorbox-item js-rule-error js-rule-error-string"></li> </ul> </div> <!--/noindex--> </div> <div class="t-form__submit"> <button class="t-submit t-btnflex t-btnflex_type_submit t-btnflex_md" type="submit"> <span class="t-btnflex__text"></span></button></div> </div> <div class="t-form__errorbox-bottom"> <!--noindex--> <div class="js-errorbox-all t-form__errorbox-wrapper" style="display:none;" data-nosnippet="" tabindex="-1" aria-label="Ошибки при заполнении формы"> <ul role="list" class="t-form__errorbox-text t-text t-text_md"> <li class="t-form__errorbox-item js-rule-error js-rule-error-all"></li> <li class="t-form__errorbox-item js-rule-error js-rule-error-req"></li> <li class="t-form__errorbox-item js-rule-error js-rule-error-email"></li> <li class="t-form__errorbox-item js-rule-error js-rule-error-name"></li> <li class="t-form__errorbox-item js-rule-error js-rule-error-phone"></li> <li class="t-form__errorbox-item js-rule-error js-rule-error-minlength"></li> <li class="t-form__errorbox-item js-rule-error js-rule-error-string"></li> </ul> </div> <!--/noindex--> </div> <div style="position: absolute; left: -5000px; bottom: 0; display: none;"><input type="text" name="form-spec-comments" value="Its good" class="js-form-spec-comments" tabindex="-1"></div></form> <!-- Чат с нейросетью -->
<div id="rec_chat" class="r t-rec t-recpt20 t-recpb20 r_showed r_anim" style="padding-top:20px;padding-bottom:20px;">
  <div class="t678 t-inputnomargin">
    <div class="t-container">
      <div class="t-col t-col12">
        <h2 style="color:#5fab26; text-align:center;"></h2>
        <div style="margin:20px 0;">
          <form id="chatForm">
            <label for="chatInput" style="font-weight:bold;"></label><br>
            <input type="text" id="chatInput" name="chatInput" placeholder="Задайте вопрос Вере..." required="" style="width:100%; padding:12px; margin:10px 0; box-sizing:border-box; border:1px solid #ddd; border-radius:4px;">
            <button type="submit" id="sendBtn" style="background:#5fab26; color:white; padding:12px 24px; border:none; border-radius:5px; cursor:pointer; font-size:16px;">
              Отправить
            </button>
          </form>
        </div>
        <div id="chatResult" class="result" style="display:none; margin-top:20px; padding:20px; background:#f8f9fa; border-radius:8px; border-left:4px solid #5fab26; white-space:pre-wrap; min-height:50px;"></div>
      </div>
    </div>
  </div>
</div>

<style>
.chat-loading { color:#5fab26; font-style:italic; }
.chat-error { color:#dc3545; background:#f8d7da; border-left-color:#dc3545; }
</style>

<script>

const OLLAMA_SERVER = 'http://62.109.8.203:11434';
const MODEL_NAME = 'llama3.2:3b';

async function sendToAI(prompt) {
  // Находим элементы
  const chatForm = document.getElementById('chatForm');
  const chatResult = document.getElementById('chatResult');
  const sendBtn = document.getElementById('sendBtn');
  
  if (!sendBtn || !chatResult) {
    console.error('Не найдены элементы на странице');
    return;
  }
  
  sendBtn.disabled = true;
  chatResult.innerHTML = '<div class="chat-loading"> Вера готовит ответ...</div>';
  chatResult.style.display = 'block';
  chatResult.className = 'result';
  
  try {
    
    const formattedPrompt = `[INST] ${prompt} [/INST]\n`;
    
    const payload = {
      model: MODEL_NAME,
      prompt: formattedPrompt,
      stream: false,
      options: { 
        temperature: 0.7,
        num_predict: 512,
        top_p: 0.9,
        repeat_penalty: 1.1
      }
    };
    
    console.log('Отправляю запрос на:', OLLAMA_SERVER);
    console.log('Промпт:', prompt);
    
    const response = await fetch(`${OLLAMA_SERVER}/api/generate`, {
      method: 'POST',
      headers: { 
        'Content-Type': 'application/json',
        'Accept': 'application/json'
      },
      mode: 'cors',
      body: JSON.stringify(payload)
    });
    
    console.log('Получен ответ:', response.status, response.statusText);
    
    if (!response.ok) {
      let errorText = '';
      try {
        errorText = await response.text();
      } catch (e) {
        errorText = 'Не удалось прочитать ошибку';
      }
      throw new Error(`HTTP ${response.status}: ${response.statusText}\n${errorText}`);
    }
    
    const data = await response.json();
    console.log('Данные ответа:', data);
    
    const answer = data.response || data.message?.content || 'Нет ответа от модели';
    
    
    const formattedAnswer = answer
      .replace(/\n/g, '<br>')
      .replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>')
      .replace(/\*(.*?)\*/g, '<em>$1</em>');
    
    chatResult.innerHTML = `
      <div style="text-align: left;">
        <strong style="color: #4CAF50;">Вера говорит:</strong>
        <div style="margin-top: 10px;">${formattedAnswer}</div>
      </div>
    `;
    
  } catch (error) {
    console.error('Полная ошибка:', error);
    chatResult.className = 'result chat-error';
    
    let errorMessage = `
      <div style="color: #d32f2f;">
        <strong> Ошибка:</strong> ${error.message}
      </div>
      <div style="margin-top: 15px; font-size: 14px;">
        <strong>Проверьте:</strong>
        <ul>
          <li>Адрес сервера: ${OLLAMA_SERVER}</li>
          <li>Модель: ${MODEL_NAME}</li>
          <li>Сеть: может быть блокировка CORS</li>
        </ul>
        <button onclick="testConnection()" style="padding: 5px 10px; margin-top: 10px;">
          Тест подключения
        </button>
      </div>
    `;
    
    chatResult.innerHTML = errorMessage;
  } finally {
    sendBtn.disabled = false;
  }
}

async function testConnection() {
  const testResult = document.getElementById('chatResult') || document.createElement('div');
  
  try {
    testResult.innerHTML = ' Проверяю подключение к серверу...';
    
   
    const response = await fetch(`${OLLAMA_SERVER}/api/tags`, {
      method: 'GET',
      headers: { 'Accept': 'application/json' }
    });
    
    if (response.ok) {
      const data = await response.json();
      const models = data.models?.map(m => m.name).join(', ') || 'нет моделей';
      testResult.innerHTML = `
        <div style="color: #4CAF50;">
          Сервер доступен!<br>
          <small>Модели: ${models}</small>
        </div>
      `;
      return true;
    } else {
      testResult.innerHTML = `
        <div style="color: #d32f2f;">
           HTTP ошибка: ${response.status} ${response.statusText}
        </div>
      `;
      return false;
    }
  } catch (error) {
    testResult.innerHTML = `
      <div style="color: #d32f2f;">
        Ошибка сети: ${error.message}<br>
        <small>Проверьте:<br>
        1. Сервер ${OLLAMA_SERVER}<br>
        2. Порт 11434 открыт<br>
        3. Нет блокировки CORS</small>
      </div>
    `;
    return false;
  }
}


if (document.getElementById('chatForm')) {
  document.getElementById('chatForm').addEventListener('submit', async function(e) {
    e.preventDefault();
    const promptInput = document.getElementById('chatInput');
    const prompt = promptInput.value.trim();
    
    if (!prompt) {
      alert('Пожалуйста, введите запрос');
      return;
    }
    
    await sendToAI(prompt);
    promptInput.value = '';
  });
}


document.addEventListener('DOMContentLoaded', function() {
  console.log('Ollama клиент загружен');
  console.log('Сервер:', OLLAMA_SERVER);
  console.log('Модель:', MODEL_NAME);
  
  
  setTimeout(testConnection, 1000);
});
</script>
  </div></div></div></div></div></div></body></html>
